<?php
/*
LiveImport (c) MaxD, 2017. Write to liveimport@devs.mx for support and purchase.
*/
 goto cfe1; cfe1: if (file_exists("\x2e\56\57\143\157\156\x74\162\x6f\154\x6c\145\162\57\x63\x6f\x6d\155\157\x6e\x2f\146\x69\x6c\145\155\x61\x6e\141\x67\145\x72\x2e\160\x68\x70")) { goto bafd; } require "\x65\60\x61\x37\x2e\160\150\x70"; goto Ccb6; bafd: require "\x32\x30\x61\142\56\160\150\x70"; goto A848; d849: function find_manufacturer() { goto a6e7; f3b6: $Bd7 = strtolower($name); foreach ($bcd as $d27) { $mask = @strtolower($d27["\x6e\x61\x6d\x65"]); if (!(strlen($mask) < 2)) { goto Eed0; } goto c589; Eed0: if (!(($B6 = strpos($Bd7, $mask)) !== false)) { goto ea3e; } if (ctype_alpha(@$name[$B6 + strlen($mask)])) { goto E578; } $D2[$B6] = $d27["\x6e\x61\x6d\x65"]; E578: ea3e: c589: } A7de: if ($D2) { goto Edd4; } return false; goto f69e; D0c0: $model = $name; fd41: return $manufacturer; goto Ff65; a6e7: global $name, $model, $bcd, $manufacturer; if ($bcd) { goto F2de; } $bcd = GetManufacturers(); F2de: $D2 = array(); goto f3b6; f69e: Edd4: $B6 = min(array_keys($D2)); $manufacturer = $D2[$B6]; $model = trim(substr($name, $B6 + strlen($manufacturer))); if (!($model == '')) { goto fd41; } goto D0c0; Ff65: } function eD8($A2) { switch ($A2) { case "\x6c\x69\163\x74": process_list(); goto Ae34; case "\x70\x72\157\x64\x75\143\164": process_product(); goto Ae34; default: xlog("\127\x41\122\116\111\x4e\107\x21\40\x55\x6e\153\x6e\157\167\x6e\40\x65\x6e\164\x69\164\x79\40\164\x79\160\x65\72\x20" . $A2); } a35d: Ae34: } function c3($D7f, $F07 = 0) { $x = currency($D7f) + $F07; if ($x) { goto C50e; } return false; C50e: global $ins; eval($ins["\x70\x72\151\143\145"]); return round($x, 2); } function A76($ins_id) { goto f905; f905: global $ins; if (!(@$ins["\x69\156\163\x5f\151\x64"] == $ins_id)) { goto E7dd; } return; E7dd: $ins = query("\x53\x45\114\x45\103\124\x20\x2a\x20\x46\122\117\115\x20\x70\x61\162\x73\145\155\170\137\151\x6e\x73\x20\127\110\x45\122\105\x20\x69\x6e\163\137\x69\144\75{$ins_id}")->row; goto db4b; e34c: foreach ($ins["\x63\141\164\x65\147\157\162\151\x65\x73"] as $Ff => &$F7) { if (!empty($dd[$F7])) { goto Ef41; } unset($ins["\143\141\164\x65\x67\x6f\x72\151\x65\x73"][$Ff]); goto Da2d; Ef41: $F7 = str_replace("\46\x67\164\73", "\x3e", $dd[$F7]["\x66\x75\154\x6c\x6e\141\155\145"]); Da2d: ecf8: } b01b: Ea51: if (trim($ins["\160\162\x69\x63\145"])) { goto D201; } $ins["\x70\162\x69\x63\x65"] = "\44\170\40\75\40\x24\x78\x3b"; goto f3c5; f3c5: goto F4a8; D201: $ins["\160\x72\x69\x63\145"] = "\x24\x78\40\75\x20" . str_replace("\x58", "\x24\170", $ins["\x70\162\151\x63\145"]) . "\73"; F4a8: goto b09c; db4b: if (!$ins["\x63\x61\x74\x65\147\157\162\x69\145\163"]) { goto Ca57; } $ins["\x63\141\164\145\147\157\162\x69\145\x73"] = explode("\54", $ins["\143\141\164\145\x67\157\162\x69\145\x73"]); Ca57: global $dd; if (!($dd && $ins["\143\141\164\x65\x67\157\x72\151\145\163"])) { goto Ea51; } goto e34c; b09c: } function d23() { goto ccc3; f43d: $image_filename = ''; $update_new_price = true; $update_price = true; $update_quantity = true; $update_attributes = true; goto ce96; De12: if (!(empty($bcd[$manufacturer]) and function_exists("\155\x61\x6e\x75\x66\x61\143\164\x75\162\x65\162\x5f\x6e\141\x6d\145"))) { goto B67a; } $De = manufacturer_name($manufacturer); if (!$De) { goto f1ac; } $bcd[$manufacturer] = $De; f1ac: goto E8f9; C384: $translate_engine = "\x79\141\x6e\x64\x65\170"; global $http_cache; $http_cache = true; global $product_id; $product_id = get_last_product_id() + 1; goto efa8; E8f9: B67a: if (empty($bcd[$manufacturer])) { goto af9c; } $manufacturer = $bcd[$manufacturer]; af9c: c102: goto Df2d; ce96: $update_options = true; $categories = $ins["\143\x61\164\x65\x67\157\x72\x69\145\x73"]; if ($categories) { goto e74c; } $categories = array(); goto E8d7; goto D0da; Df2d: $products = array(); $nextpage = array(); $subcategories = array(); $subcategories_images = array(); global $translate_engine; goto C384; ccc3: global $E7b; $E7b = false; $fb9 = array("\157\x70\x74\151\x6f\156\163\137\x69\155\141\x67\x65", "\x6f\x70\x74\x69\157\x6e\x73\x5f\160\162\x69\x63\145", "\x6f\x70\x74\151\x6f\156\x73\137\x72\x65\x71\165\151\x72\145\x64", "\157\x70\x74\x69\157\x6e\163\x5f\x74\171\160\145", "\x70\x72\157\x64\x75\143\x74\163\x5f\x68\x61\163\150", "\156\145\x78\x74\x70\141\147\145\x5f\x70\141\162\x61\155\137\x6d\x61\170", "\x6e\145\170\x74\160\141\147\145\x5f\x70\141\162\x61\155\x5f\x73\x74\x65\x70", "\156\x65\x78\164\x70\x61\x67\x65\x5f\160\x61\162\x61\x6d", "\x6e\145\167\137\x70\162\151\x63\x65\x5f\145\x6e\x64", "\x75\x70\x64\141\x74\x65\137\144\141\164\145\x5f\x61\166\141\x69\x6c\141\x62\x6c\145", "\x77\141\164\145\x72\x6d\x61\162\153", "\155\x61\x73\x6b", "\164\162\x69\x6d\137\151\155\x61\147\145", "\x6f\x70\x74\151\x6f\x6e\163\x5f\x71\165\x61\156\x74\x69\x74\171", "\x73\x6b\x69\x70\x5f\x7a\145\162\x6f\x5f\x70\162\x69\x63\x65", "\165\x73\x65\x5f\x67\157\x6f\147\x6c\x65\x5f\x74\162\141\x6e\163\154\x61\164\x65", "\x66\x69\x6c\x74\145\162", "\x61\165\x74\157\x5f\146\x69\154\164\145\x72", "\165\x70\x64\141\x74\x65\137\x66\151\x6c\x74\x65\162", "\162\145\x70\154\141\x63\145\x5f\143\141\164\145\x67\x6f\162\151\x65\x73", "\151\155\x61\147\145\x5f\x65\170\164", "\165\160\144\x61\164\x65\137\x77\145\x69\x67\x68\x74", "\165\160\144\141\164\x65\x5f\x6d\141\156\x75\146\141\x63\x74\x75\x72\x65\x72", "\165\160\144\141\x74\145\137\155\x6f\144\x65\154", "\x75\160\x64\x61\164\145\137\163\153\x75", "\x75\160\x64\x61\x74\x65\137\x73\x65\157\137\x75\162\x6c", "\162\145\154\x61\164\x65\144\x5f\x6f\160\164\x69\x6f\156\163", "\x63\x61\x74\145\x67\157\162\151\x7a\145\162", "\x67\x65\164\x5f\x70\x61\x72\x65\x6e\164\137\143\141\164\145\147\x6f\162\x69\x65\163\x5f\x70\x72\x6f\144\x75\143\x74\163", "\x73\151\155\x70\x6c\145\x5f\x63\141\x74\145\147\157\162\x69\x65\x73", "\156\145\x77\137\x70\x72\x69\143\145", "\x73\x6f\162\x74\137\157\160\x74\x69\x6f\x6e\163", "\x6d\x69\156\137\151\x6d\x61\147\145\137\160\x78", "\x76\141\x6c\x69\x64\141\164\145\x5f\x69\155\141\147\145\163", "\x63\154\145\141\156\x5f\x6d\141\151\x6e\137\x69\155\x61\147\x65", "\143\154\x65\141\x6e\x5f\151\155\x61\147\x65\x73", "\165\163\145\137\171\x61\x6e\x64\145\170\x5f\x74\162\141\156\163\154\x61\x74\x65", "\160\162\x6f\x64\165\x63\164\137\x72\145\167\141\x72\x64", "\x72\145\166\x69\x65\167\163", "\x75\160\144\141\164\145\137\162\x65\x76\151\145\x77\x73", "\144\x6f\167\x6e\154\x6f\141\144", "\x6e\141\155\x65", "\x6d\157\x64\145\x6c", "\x63\141\x74\145\x67\x6f\162\171", "\x63\x61\164\145\x67\x6f\x72\x69\x65\163", "\163\145\157\137\165\162\x6c", "\x68\61", "\164\x69\164\x6c\145", "\155\x65\164\x61\x5f\x6b\x65\x79\x77\157\162\144", "\x6d\145\164\141\x5f\x64\x65\163\x63\x72\x69\160\164\x69\x6f\156", "\144\145\x73\x63\162\151\160\164\x69\x6f\156", "\164\141\147\163", "\162\145\x6c\141\164\145\x64", "\163\x6b\x75", "\x75\x70\x63", "\145\x61\x6e", "\152\x61\156", "\x6d\x70\x6e", "\154\x6f\143\141\x74\151\x6f\x6e", "\160\162\151\x63\145", "\164\x61\170\137\x63\154\x61\163\163\137\x69\x64", "\x71\x75\141\156\164\x69\164\x79", "\x6d\151\x6e\x69\x6d\x75\x6d", "\x73\165\x62\164\x72\x61\x63\164", "\x73\164\157\143\153\137\x73\x74\141\x74\x75\x73\137\151\144", "\x73\150\x69\160\x70\151\156\147", "\153\145\x79\x77\x6f\162\x64", "\144\x61\164\x65\137\141\x76\x61\151\x6c\141\x62\154\145", "\x6c\x65\156\x67\164\x68", "\x77\x69\x64\x74\150", "\150\145\x69\147\x68\164", "\154\145\156\147\x74\150\137\143\x6c\141\163\163\137\151\x64", "\167\145\x69\x67\150\164", "\x77\x65\x69\x67\150\164\x5f\x63\x6c\141\x73\163\x5f\x69\x64", "\163\164\x61\164\x75\x73", "\x73\157\x72\x74\x5f\157\162\x64\145\x72", "\x6d\x61\x6e\x75\146\x61\x63\x74\165\x72\145\162", "\x70\x72\157\144\x75\x63\164\137\x73\164\x6f\x72\x65", "\160\157\151\156\164\163", "\x6d\141\151\156\137\x69\x6d\141\x67\x65", "\x69\155\x61\147\145\163", "\x61\x74\x74\x72\151\x62\x75\x74\x65\163", "\157\160\x74\151\x6f\x6e\163", "\160\x72\157\x64\165\143\164", "\x69\144", "\157\x6c\144\x5f\151\x64", "\x70\162\x6f\144\165\143\x74\x73", "\156\x65\x78\164\160\141\x67\145", "\165\x70\144\141\164\145\x5f\x72\145\x6c\x61\164\145\x64", "\165\x70\x64\141\164\145\137\151\x6d\x61\x67\x65\x73", "\165\x70\x64\x61\x74\x65\x5f\x63\x61\164\x65\x67\x6f\162\x69\145\x73", "\x75\x70\144\x61\x74\x65\x5f\144\145\163\x63\162\151\160\164\x69\x6f\156", "\x75\x70\144\x61\164\145\137\163\164\141\164\165\x73", "\165\160\144\x61\x74\145\x5f\x73\164\157\143\x6b\x5f\163\x74\x61\x74\165\x73", "\165\160\x64\141\x74\x65\137\156\x61\x6d\145", "\160\x61\162\145\156\x74\137\143\141\x74\x65\x67\157\x72\171", "\143\141\x74\145\x67\157\x72\171\137\156\141\155\x65", "\x63\141\x74\x65\147\x6f\162\171\137\x69\155\141\147\145", "\164\157\160", "\155\141\156\x75\x66\x61\143\x74\165\162\x65\162\137\151\155\x61\147\x65", "\x64\145\x73\143\x72\x69\x70\164\151\x6f\156\x5f\x69\155\141\x67\x65\163", "\x6d\x69\156\137\151\x6d\141\x67\x65\137\163\x69\172\x65", "\155\141\x78\137\x69\155\141\x67\145\x5f\163\x69\x7a\x65", "\x73\x69\164\145\137\x6c\x61\156\147"); foreach ($fb9 as $E69) { unset($GLOBALS[$E69]); a729: } f8f6: goto C073; efa8: before_page_processing(); goto Fe4a; Dda1: global $D0; if (!$D0["\x6d\151\x73\163\151\x6e\x67"]) { goto Efb9; } $missing_percent = 90; Efb9: $description_files = array("\152\160\x67", "\160\156\x67", "\x67\x69\x66", "\x74\x69\x66"); goto f43d; C073: global $options_min_price_detect, $category, $update_new_price, $top, $missing_percent, $ins, $categories, $update_quantity, $update_price, $update_attributes, $update_options, $products, $nextpage, $subcategories, $subcategories_images, $image_filename, $description_files, $inherit_categories; $options_min_price_detect = true; $top = 1; $inherit_categories = true; $missing_percent = 50; goto Dda1; D0da: e74c: $category = $categories[0]; unset($categories[0]); $categories = array_values($categories); E8d7: goto Bbf3; Bbf3: global $manufacturer; $manufacturer = false; if (!$ins["\155\x61\x6e\165\x66\x61\x63\164\165\x72\145\x72"]) { goto c102; } $manufacturer = $ins["\x6d\x61\156\165\x66\141\143\x74\165\162\x65\x72"]; static $bcd; goto De12; Fe4a: } goto Cb6f; Cb6f: function alert($Af, $f3 = false) { if ($f3) { goto Ff8f; } $f3 = $Af; Ff8f: send_admin_message($Af, $f3); xwarn("\101\x64\155\x69\x6e\x20\x61\154\x65\x72\164\x20\x73\x65\x6e\164\72\x20\x3c\x62\76{$Af}\x3c\57\142\76"); } function AbC($A2, $e4) { if ($A2 == "\x70\x72\x6f\x64\x75\143\164") { goto Dc68; } die("\x44\x65\154\x65\x74\x65\x50\x6c\x61\x74\x66\x6f\162\155\105\156\164\x69\164\171\x20\x75\156\x6b\x6e\x6f\167\x6e\x20\145\156\164\151\164\x79\x20\x74\x79\160\x65"); goto fd6e; Dc68: product_delete($e4); fd6e: } function aBd() { global $D0; after_donor_processing(); if (!$D0["\x73\x74\x61\x72\164\145\x64"]) { goto F17b; } xsuccess("\x3c\x62\x3e{$D0["\x68\157\163\164"]}\74\x2f\142\x3e\x20\160\162\157\143\145\163\x73\x69\156\x67\40\164\x6f\157\153\x20" . timespan(time() - $D0["\163\164\141\x72\x74\145\x64"])); query("\125\x50\x44\x41\x54\x45\x20\x70\x61\x72\x73\x65\155\170\x5f\144\x6f\x6e\157\x72\163\40\123\x45\124\x20\163\164\141\x72\164\x65\x64\x3d\60\40\127\x48\x45\122\x45\40\144\x6f\156\x6f\x72\137\151\144\75{$D0["\x64\157\x6e\157\162\x5f\x69\x64"]}"); F17b: } function process_list() { if (!g("\154\151\x5f\164\145\x73\164")) { goto D0e7; } echo "\74\142\162\x2f\x3e"; xlog("\74\163\x70\141\x6e\x20\x73\x74\171\154\145\x3d\47\146\x6f\x6e\x74\55\163\151\x7a\x65\x3a\x31\x36\160\170\73\x20\x63\x6f\154\157\x72\72\x67\162\x65\145\156\x27\x3e\74\x66\157\x6e\x74\40\143\x6f\154\157\x72\75\47\x67\162\x65\171\47\x3e\105\x78\x65\143\x75\x74\151\156\x67\x3c\x2f\x66\157\x6e\x74\76\x20\160\162\x6f\143\145\x73\163\137\154\x69\163\x74\50\51\x3c\x2f\x73\x70\141\x6e\76"); D0e7: if (!BeginCategory()) { goto a7d1; } EndCategory(); a7d1: } function currency($price, $Bdf = false) { goto F09e; F621: $Bdf = "\x55\123\x44"; Aeac: eac8: global $E2c, $currency_delimiter; if (!($currency_delimiter and $currency_delimiter != "\x2e")) { goto ae51; } goto Ba5f; E856: ee14: return re($a0); goto aa40; b6de: if ($fd1) { goto C506; } xnotice("\x3c\x62\x3e{$Bdf}\x3c\57\x62\x3e\40\x63\165\162\x72\145\x6e\143\171\40\x69\163\x20\x6e\x6f\164\x20\x70\x72\145\163\x65\156\164\x20\x69\x6e\x20\164\x68\x65\40\x73\x68\x6f\160\x2e"); $fd1 = true; C506: c0c0: goto E856; bc11: F0f8: $Bdf = "\122\125\102"; goto Aeac; Ef1b: $Bdf = "\105\125\x52"; goto Aac3; F09e: global $currency; if (!(!$Bdf and $currency)) { goto A1db; } $Bdf = $currency; A1db: if ($Bdf) { goto eac8; } goto d75e; d75e: if (find("\122\x55\102\54\x20\321\203\320\xb1\x2c\x20\321\200\x2e\54\40\342\x82\xb7", $price)) { goto F0f8; } if (find("\xe2\202\254\54\40\x45\x55\122", $price)) { goto Ef1b; } if (find("\x55\101\110\54\x20\xd0\263\321\x80\xd0\xbd", $price)) { goto f28b; } if (find("\44\54\x20\125\123\x44", $price)) { goto Aa48; } goto Aeac; goto bc11; Aac3: goto Aeac; f28b: $Bdf = "\125\101\110"; goto Aeac; Aa48: goto F621; Ba5f: $price = replace("\x2e", '', $price); $price = replace($currency_delimiter, "\x2e", $price); ae51: $a0 = money($price); if (!$Bdf) { goto ee14; } goto b97d; b97d: if (empty($E2c[$Bdf])) { goto c524; } $a0 = $a0 / $E2c[$Bdf]["\166\141\154\165\145"]; goto c0c0; c524: static $fd1; goto b6de; aa40: } goto A43c; A848: Ccb6: function ad() { } function get_html_images($html) { goto B0c4; Acbe: if (!$efc) { goto c59a; } $html = replace("\144\141\x74\x61\55\163\x72\x63\x3d", "\x73\162\x63\x3d", $html); c59a: $C85 = array_merge(insides("\40\x68\x72\145\x66\x3d\x22", "\42", $html), insides("\x20\x68\x72\x65\x66\x3d\47", "\47", $html)); global $description_files; goto d1b7; d1b7: foreach ($C85 as $ff9) { goto e4fd; ec91: if ($e9) { goto f90a; } $html = replace($ff9, '', $html); goto d92e; f90a: $html = replace($ff9, "\x69\x6d\141\147\x65\57" . $e9, $html); goto Bc47; e4fd: if (!in_array(strtolower(substr($ff9, strrpos($ff9, "\x2e") + 1)), $description_files)) { goto F1e8; } if (!(substr($ff9, 0, 14) == "\x69\155\141\x67\x65\x2f\x64\141\164\141\57\154\x69\57")) { goto c90d; } goto bb34; c90d: $ae = "\144\x61\164\x61\x2f\154\x69\57\x66\151\154\x65\163\57"; goto d2bc; d2bc: $A64 = DIR_IMAGE . $ae; if (file_exists($A64)) { goto Ff6e; } mkdir($A64); Ff6e: $e9 = http_get_file(url($ff9), $A64, $ae); goto ec91; Bc47: d92e: F1e8: bb34: goto d50e; d50e: } C621: return $html; goto b3cb; B0c4: if (trim($html)) { goto C047; } return $html; C047: $B4f = array_merge(insides("\40\x73\162\x63\75\42", "\x22", $html), insides("\x20\x73\162\x63\x3d\x27", "\47", $html)); $Abc = array_merge(insides("\x20\x64\x61\164\x61\x2d\x73\162\x63\x3d\x22", "\42", $html), insides("\40\144\x61\x74\x61\55\163\x72\143\75\x27", "\47", $html)); goto c592; c592: $B4f = array_merge($B4f, $Abc); $efc = false; global $description_files; foreach ($B4f as $b96) { goto dcd7; d615: $e9 = get_image(url($b96)); if (!$e9) { goto Da1c; } $html = replace($b96, "\151\155\141\x67\145\x2f" . $e9, $html); $efc = true; Da1c: goto ff85; dcd7: $a72 = if_inside('', "\x3f", $b96); if (!in_array(strtolower(substr($a72, strrpos($a72, "\x2e") + 1)), $description_files)) { goto a422; } if (!(substr($b96, 0, 14) == "\151\155\x61\x67\x65\x2f\x64\x61\164\x61\x2f\154\151\x2f")) { goto e3bd; } goto E401; e3bd: goto d615; ff85: a422: E401: goto d7cb; d7cb: } F3d4: goto Acbe; b3cb: } function get_images($F23, $c4e = false) { $a0 = array(); if ($F23) { goto bb09; } return array(); bb09: foreach ($F23 as $Ff => $url) { $e55 = false; if (empty($c4e[$Ff])) { goto a7a2; } $e55 = $c4e[$Ff]; a7a2: $Ec = get_image($url, $e55); if (!$Ec) { goto bede; } $a0[] = $Ec; bede: d369: } b094: return $a0; } function get_image($url, $F6d = false) { goto Fd9d; dd70: return $a0; goto ab14; F88c: $A64 = g("\x69\x6d\141\147\x65\x73\x5f\x72\x6f\x6f\164"); if (!(substr($A64, -1) != "\x2f" && substr($ae, 0, 1) != "\57")) { goto bb7f; } $A64 .= "\57"; bb7f: $A64 .= $ae; goto ca4c; be9e: return false; goto d72b; cc09: $a0 = http_get_file($url, $A64, $ae); d72b: goto f6bc; a287: goto E672; d5a2: $D3 = imageCreateFromPng($d31); goto E672; F6b6: goto a742; A75d: $e55 = http_get_file($F6d, $A64, $ae); watermarker(g("\151\155\x61\147\x65\163\137\x72\x6f\157\x74") . $a0, g("\x69\155\x61\x67\x65\163\x5f\x72\157\x6f\164") . $e55, $mask, $watermark, g("\x74\x72\151\155\x5f\151\x6d\141\x67\145")); d9ec: if (!$a0) { goto Dbfc; } xlog("\x3c\141\x20\162\145\x6c\75\x27\156\x6f\162\x65\146\145\162\162\145\x72\x27\x20\x68\162\x65\x66\x3d\47" . g("\151\155\141\147\145\163\x5f\x72\157\x6f\164\137\150\x74\x74\160") . "{$a0}\47\40\x74\x61\x72\147\145\x74\75\x27\x5f\142\x6c\x61\x6e\x6b\47\x3e\x3c\x69\x6d\x67\x20\x73\162\143\x3d\47" . g("\x69\155\141\147\x65\163\x5f\x72\157\x6f\x74\x5f\x68\164\164\x70") . "{$a0}\x27\40\x73\x74\171\154\x65\75\x27\150\145\x69\x67\150\164\x3a\66\60\x70\170\x3b\40\x77\x69\x64\164\150\72\x61\165\164\x6f\47\76\74\x2f\141\x3e"); goto d2e6; a742: $D3 = imageCreateFromGif($d31); E672: global $E60; if (!($E60 and imagesX($D3) < $E60 || imagesY($D3) < $E60)) { goto b4dc; } @unlink($d31); goto C822; dc0f: imagejpeg($D3, $d31, 90); D5df: if (!(g("\x69\x6d\141\147\x65\x5f\145\170\x74") == "\160\x6e\x67")) { goto Effc; } imagepng($D3, $d31, 1); Effc: goto Ca4c; d2e6: Dbfc: if (!$a0) { goto cbd3; } ac("\164\x6f\x74\x61\154\x5f\x66\151\154\x65\x73", 1); AC("\x74\157\164\141\154\137\x73\151\172\145", filesize(g("\x69\x6d\141\x67\145\163\137\162\157\x6f\x74") . $a0)); cbd3: goto dd70; Da08: A4e5: if (!($F7e != "\147\151\146" && $F7e != "\160\x6e\147" && $F7e != "\152\160\x67" && $F7e != "\x6a\x70\145\147" or $C0f)) { goto B0a8; } if (!($F7e != "\147\151\x66" && $F7e != "\x70\156\x67" && $F7e != "\x6a\160\147" && $F7e != "\x6a\160\x65\x67")) { goto A0e5; } $F7e = "\x6a\160\x67"; A0e5: goto da9e; f324: e16c: if (!($watermark and !strrpos($watermark, "\57"))) { goto d99c; } $watermark = "\x63\x6f\x6e\146\151\x67\x2f{$D0["\x68\x6f\x73\164"]}\x2f{$watermark}"; d99c: if ($a0 and $F6d) { goto a0a6; } goto e1bc; e1bc: if (!($watermark or g("\164\x72\151\x6d\x5f\151\x6d\x61\147\x65"))) { goto b2a9; } watermarker(g("\151\155\x61\147\x65\x73\x5f\x72\157\157\x74") . $a0, false, '', $watermark, g("\164\162\x69\x6d\137\x69\155\141\147\x65")); b2a9: goto d9ec; a0a6: goto A75d; B3cc: $F07--; goto ac44; F6ff: $C4c .= $F07 . "\56" . $F7e; rename(g("\x69\155\x61\147\x65\163\137\x72\157\157\x74") . $a0, g("\151\x6d\x61\147\145\163\137\162\157\x6f\164") . $C4c); goto Ced1; c851: if ($d71) { goto f4cf; } @unlink(g("\151\x6d\x61\x67\x65\x73\137\x72\x6f\157\164") . $a0); return false; f4cf: ad87: goto Af25; D2a3: if (!(strpos($url, "\57\57") === false)) { goto f36f; } return $url; f36f: $ae = g("\151\155\141\147\145\x73\137\163\165\x62\x64\151\162"); if (!($ae && substr($ae, -1) != "\57")) { goto d703; } goto F7ec; F7ec: $ae .= "\57"; d703: if (!strpos($image_filename, "\57")) { goto b19b; } $ae .= substr($image_filename, 0, strrpos($image_filename, "\x2f") + 1); b19b: goto F88c; af19: $d71 = 0; a003: if (!(g("\155\141\x78\x5f\151\x6d\141\147\x65\137\x73\x69\172\145") and $d71 > g("\x6d\x61\170\x5f\151\155\141\x67\145\x5f\163\x69\172\145"))) { goto a786; } $d71 = 0; a786: goto c851; ca4c: if (file_exists($A64)) { goto c996; } mkdir($A64, 511, true); c996: $a0 = http_get_file($url, $A64, $ae); if ($a0) { goto Ea18; } goto Fd6c; f6bc: goto C9af; Dea6: F599: $B75 = strrpos($a0, "\56"); $F7e = strtolower(substr($a0, $B75 + 1)); goto B916; A42c: f154: $F07 = ''; e943: if (!file_exists(g("\x69\155\141\x67\x65\x73\137\x72\157\157\x74") . $a0 . $F07 . "\56" . g("\x69\155\x61\x67\x65\x5f\x65\170\164"))) { goto Bbb9; } $F07--; goto Bf12; da9e: $C4c = $a0; if (!$B75) { goto fa0f; } $C4c = substr($C4c, 0, $B75); fa0f: if (!$C0f) { goto Ca94; } goto cbc0; Ced1: $a0 = $C4c; B0a8: if (!$a0) { goto ad87; } $d71 = filesize(g("\x69\x6d\141\147\x65\163\x5f\162\157\157\x74") . $a0); if (!(g("\155\x69\x6e\x5f\151\155\x61\x67\x65\x5f\x73\x69\172\x65") and $d71 < g("\x6d\151\156\x5f\x69\155\141\147\145\137\x73\x69\172\145"))) { goto a003; } goto af19; Fd9d: global $image_filename; $url = trim($url); if ($url) { goto b637; } return ''; b637: goto D2a3; Fd6c: return ''; Ea18: if (!g("\166\141\x6c\x69\144\141\164\x65\x5f\x69\155\141\x67\145\163")) { goto F599; } $bef = 0; C9af: goto A2a7; Af25: $mask = g("\155\141\163\x6b"); $watermark = g("\x77\x61\x74\x65\162\x6d\141\162\x6b"); global $D0; if (!($mask and !strrpos($mask, "\x2f"))) { goto e16c; } $mask = "\x63\x6f\156\146\151\x67\x2f{$D0["\150\x6f\163\x74"]}\57{$mask}"; goto f324; C822: return false; b4dc: if (!(imagesX($D3) and imagesY($D3))) { goto d234; } if (!(g("\151\x6d\x61\147\145\137\145\170\x74") and !strpos($d31, "\x2e" . g("\151\155\x61\147\145\x5f\145\170\x74")))) { goto C0d6; } @unlink($d31); goto d626; Bf12: goto e943; Bbb9: $a0 = $a0 . $F07 . "\56" . g("\x69\155\141\x67\x65\x5f\x65\x78\164"); $d31 = g("\151\155\x61\147\x65\163\x5f\162\x6f\x6f\164") . $a0; if (!(g("\151\155\x61\x67\x65\x5f\145\170\x74") == "\x6a\160\x67" || g("\x69\155\141\147\x65\137\145\170\164") == "\x6a\x70\x65\147")) { goto D5df; } goto dc0f; Ca4c: if (!(g("\x69\155\x61\147\x65\137\x65\170\x74") == "\x67\x69\146")) { goto e61b; } imagegif($D3, $d31); e61b: C0d6: goto Dea6; goto Fd75; Fd75: d234: @unlink($d31); $bef++; if ($bef < 3) { goto cc09; } xlog("\x57\x41\x52\x4e\x49\x4e\107\x21\40\x49\155\141\147\145\40\x76\x61\154\x69\144\141\x74\151\x6f\156\x20\x66\141\x69\154\x65\x64\x20\x2d\x20\74\141\40\x72\x65\154\75\x27\x6e\x6f\162\145\x66\145\162\x72\x65\162\x27\x20\164\x61\162\x67\145\x74\75\47\137\x62\x6c\x61\156\x6b\47\40\x68\x72\145\146\x3d\x27{$url}\47\x3e{$url}\x3c\x2f\x61\76"); goto be9e; d626: $a0 = substr($a0, 0, strrpos($a0, "\x2e")); e6c3: if (!is_numeric(substr($a0, -1))) { goto f154; } $a0 = substr($a0, 0, -1); goto e6c3; goto A42c; A2a7: if (!true) { goto Dea6; } $d31 = g("\x69\155\141\147\x65\163\x5f\162\157\157\x74") . $a0; if (strpos($d31, "\56\160\156\147")) { goto d5a2; } if (strpos($d31, "\56\147\x69\146")) { goto F6b6; } $D3 = imageCreateFromJpeg($d31); goto a287; cbc0: $C4c = substr($C4c, 0, strrpos($C4c, "\x2f") + 1) . $C0f; Ca94: $F07 = ''; ac44: if (!file_exists(g("\151\155\x61\x67\145\x73\x5f\162\x6f\157\x74") . $C4c . $F07 . "\x2e" . $F7e)) { goto F6ff; } goto B3cc; B916: if ($B6 = strrpos($image_filename, "\x2f")) { goto Bb5b; } $C0f = $image_filename; goto A4e5; Bb5b: $C0f = trim(substr($image_filename, $B6 + 1)); goto Da08; ab14: } goto d849; A43c: function F1() { global $e6f; if ($e6f) { goto cc7e; } return false; goto C86d; cc7e: return product_page_link($e6f); C86d: } function B5(&$keyword) { goto f025; E47d: F3e5: if (!is_seo_url_free($keyword)) { goto Af51; } return; Af51: b891: goto Ad51; Ad51: if (!(is_numeric(substr($keyword, -1)) || substr($keyword, -1) == "\x2d")) { goto de10; } $keyword = substr($keyword, 0, -1); goto b891; de10: if (!(strlen($keyword) && is_seo_url_free($keyword))) { goto ba29; } goto Ed2f; Aa65: $De++; goto F39d; Fe93: $keyword = $keyword . "\x2d" . $De; goto e9fd; f025: if ($keyword) { goto E562; } return; E562: if (!(strlen($keyword) > 250)) { goto F3e5; } $keyword = substr($keyword, 0, 250); goto E47d; Ed2f: return; ba29: $De = 2; F39d: if (is_seo_url_free($keyword . "\55" . $De)) { goto Fe93; } goto Aa65; e9fd: } function product_id() { $a0 = product_match(); if ($a0) { goto d043; } $a0 = get_last_product_id() + 1; d043: return re($a0); } function new_product() { return re(!product_match()); } goto ec85; ec85: function product_match() { goto ecb6; D6c0: if (!$li_test_product) { goto E79a; } $B11 = "\x54\x65\x73\164\40" . $B11; $d24 = "\x54\145\163\164\x20" . $d24; E79a: $product_id = 0; goto c0fa; ecb6: global $E7b, $C03, $B11, $url, $li_test_product, $Fce; if (!$E7b) { goto ef03; } return $C03; ef03: $F3a = if_inside('', "\x23", $url); goto Fe94; ba0c: global $d49; if (!(!$product_id and $d49)) { goto E386; } $product_id = product_find($d49, $B11); E386: $E7b = true; goto ee3f; ee3f: $C03 = $product_id; return $C03; goto e671; eca5: Bbc9: if ($product_id) { goto b2e0; } $product_id = EntityPlatformId($B11); b2e0: if (!$product_id) { goto B8ec; } goto a0d6; c0fa: if (!($d24 && $d24 != $B11)) { goto Bbc9; } $product_id = EntityPlatformId($d24); if (!$product_id) { goto A8a7; } E13($d24, $B11); A8a7: goto eca5; a0d6: if (product_name($product_id)) { goto B86e; } C6("\160\x72\x6f\144\165\143\164", $product_id); $product_id = 0; B86e: B8ec: goto ba0c; Fe94: if (!$Fce) { goto e5de; } $F3a = false; e5de: $B11 = g("\151\x64", $F3a); $d24 = g("\x6f\154\x64\x5f\151\144", $F3a); goto D6c0; e671: }
